<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-request.html">
<script src="../dexie/dist/dexie.js"></script>

<script>
(function() {
  'use strict';
  Polymer.AppLevelDBDatabaseBehavior = {
    properties: {
      dbName: {
        type:String
      },
      db:{
        type:Object,
        computed: '__computeDb(dbName)',
        notify:true,
      }
    },
    saveIndex:function(index) {
      this.db.get(index.value).then(function(obj) {
        if(!obj) {
          this.db.put({key:index.value,index:true});
        } 
      }.bind(this));
    },
    __computeDb:function(dbName) {
      if(!dbName) {
        return null;
      }
      var _db = new Dexie(dbName);
       
      var schema = {};
      schema['documents']='key';
      _db.version(1).stores(schema);
      console.log(_db.documents);
      return _db.documents;
    }
  };
})();   
</script>
